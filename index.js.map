{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"49411735-b32ab4d57ab72698c2bda355f\";\nconst URL = \"https://pixabay.com/api/\";\n\n/**\n * Функція запиту до API Pixabay\n * @param {string} query - пошуковий запит\n * @param {number} page - номер сторінки\n * @param {number} perPage - кількість результатів на сторінку\n * @returns {Promise<{images: Array, totalHits: number}>}\n */\nexport async function axiosImages(query, page, perPage) {\n    const response = await axios.get(URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            page,\n            per_page: perPage,\n        },\n    });\n\n    return {\n        images: response.data.hits,\n        totalHits: response.data.totalHits,\n    };\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\n/**\n * Очищує галерею перед новим пошуком\n */\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\n/**\n * Відображає зображення в галереї\n * @param {Array} images - масив зображень\n */\nexport function displayImages(images) {\n    const markup = images\n        .map(\n            (image) => `\n        <li class=\"img-card\">\n            <a href=\"${image.largeImageURL}\">\n                <img \n                    src=\"${image.webformatURL}\" \n                    alt=\"${image.tags}\" \n                    loading=\"lazy\"\n                />\n            </a>\n            <div class=\"image-info\">\n                <p><strong>Likes:</strong> ${image.likes}</p>\n                <p><strong>Views:</strong> ${image.views}</p>\n                <p><strong>Comments:</strong> ${image.comments}</p>\n                <p><strong>Downloads:</strong> ${image.downloads}</p>\n            </div>\n        </li>`\n        )\n        .join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n","import { axiosImages } from \"./js/pixabay-api.js\";\nimport { displayImages, clearGallery } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Отримуємо доступ до DOM-елементів\nconst form = document.querySelector(\"form\");\nconst input = document.querySelector(\"#input\");\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.getElementById(\"load-more-btn\");\nconst loadingMessage = document.getElementById(\"loading-message\");\n\n// Глобальні змінні для пошуку\nlet query = \"\";\nlet page = 1;\nconst perPage = 15; // Кількість зображень на сторінку\n\n// Обробник події для форми\nform.addEventListener(\"submit\", async (evt) => {\n    evt.preventDefault();\n    \n    query = input.value.trim();\n    if (query === \"\") {\n        iziToast.error({\n            message: \"Please fill in the field!\",\n            position: \"topRight\",\n            messageColor: \"#FAFAFB\",\n            backgroundColor: \"#EF4040\"\n        });\n        return;\n    }\n\n    // Скидання результатів попереднього пошуку\n    page = 1;\n    clearGallery();\n    loadMoreBtn.style.display = \"none\";\n\n    await fetchImages();\n});\n\n// Обробник події для кнопки \"Load more\"\nloadMoreBtn.addEventListener(\"click\", async () => {\n    page += 1;\n    await fetchImages();\n});\n\n// Функція отримання та відображення зображень\nasync function fetchImages() {\n    try {\n        loadingMessage.style.display = \"block\";\n\n        const { images, totalHits } = await axiosImages(query, page, perPage);\n        \n        if (!images || images.length === 0) {\n            iziToast.warning({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n                messageColor: \"#FAFAFB\",\n                backgroundColor: \"#EF4040\"\n            });\n            loadMoreBtn.style.display = \"none\";\n            return;\n        }\n\n        displayImages(images);\n        \n        // Логіка пагінації: показуємо або ховаємо кнопку \"Load more\"\n        const maxPages = Math.ceil(totalHits / perPage);\n        if (page >= maxPages) {\n            loadMoreBtn.style.display = \"none\";\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: \"topRight\",\n                messageColor: \"#FAFAFB\",\n                backgroundColor: \"#4E75FF\"\n            });\n        } else {\n            loadMoreBtn.style.display = \"block\";\n        }\n\n    } catch (error) {\n        iziToast.error({\n            message: \"An error occurred while fetching images. Please try again!\",\n            position: \"topRight\",\n            messageColor: \"#FAFAFB\",\n            backgroundColor: \"#EF4040\"\n        });\n    } finally {\n        loadingMessage.style.display = \"none\";\n    }\n}\n"],"names":["API_KEY","URL","axiosImages","query","page","perPage","response","axios","gallery","lightbox","SimpleLightbox","clearGallery","displayImages","images","markup","image","form","input","loadMoreBtn","loadingMessage","evt","iziToast","fetchImages","totalHits","maxPages"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAM,2BASL,eAAeC,EAAYC,EAAOC,EAAMC,EAAS,CACpD,MAAMC,EAAW,MAAMC,EAAM,IAAIN,EAAK,CAClC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAAC,EACA,SAAUC,CACb,CACT,CAAK,EAED,MAAO,CACH,OAAQC,EAAS,KAAK,KACtB,UAAWA,EAAS,KAAK,SACjC,CACA,CC1BA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAKM,SAASC,GAAe,CAC3BH,EAAQ,UAAY,EACxB,CAMO,SAASI,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EACV,IACIE,GAAU;AAAA;AAAA,uBAEAA,EAAM,aAAa;AAAA;AAAA,2BAEfA,EAAM,YAAY;AAAA,2BAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,6CAKQA,EAAM,KAAK;AAAA,6CACXA,EAAM,KAAK;AAAA,gDACRA,EAAM,QAAQ;AAAA,iDACbA,EAAM,SAAS;AAAA;AAAA,cAGvD,EACA,KAAK,EAAE,EAEZP,EAAQ,mBAAmB,YAAaM,CAAM,EAC9CL,EAAS,QAAO,CACpB,CCtCA,MAAMO,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAQ,SAAS,cAAc,QAAQ,EACpB,SAAS,cAAc,UAAU,EAC1D,MAAMC,EAAc,SAAS,eAAe,eAAe,EACrDC,EAAiB,SAAS,eAAe,iBAAiB,EAGhE,IAAIhB,EAAQ,GACRC,EAAO,EACX,MAAMC,EAAU,GAGhBW,EAAK,iBAAiB,SAAU,MAAOI,GAAQ,CAI3C,GAHAA,EAAI,eAAc,EAElBjB,EAAQc,EAAM,MAAM,OAChBd,IAAU,GAAI,CACdkB,EAAS,MAAM,CACX,QAAS,4BACT,SAAU,WACV,aAAc,UACd,gBAAiB,SAC7B,CAAS,EACD,MACH,CAGDjB,EAAO,EACPO,IACAO,EAAY,MAAM,QAAU,OAE5B,MAAMI,EAAW,CACrB,CAAC,EAGDJ,EAAY,iBAAiB,QAAS,SAAY,CAC9Cd,GAAQ,EACR,MAAMkB,EAAW,CACrB,CAAC,EAGD,eAAeA,GAAc,CACzB,GAAI,CACAH,EAAe,MAAM,QAAU,QAE/B,KAAM,CAAE,OAAAN,EAAQ,UAAAU,GAAc,MAAMrB,EAAYC,EAAOC,EAAMC,CAAO,EAEpE,GAAI,CAACQ,GAAUA,EAAO,SAAW,EAAG,CAChCQ,EAAS,QAAQ,CACb,QAAS,2EACT,SAAU,WACV,aAAc,UACd,gBAAiB,SACjC,CAAa,EACDH,EAAY,MAAM,QAAU,OAC5B,MACH,CAEDN,EAAcC,CAAM,EAGpB,MAAMW,EAAW,KAAK,KAAKD,EAAYlB,CAAO,EAC1CD,GAAQoB,GACRN,EAAY,MAAM,QAAU,OAC5BG,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,WACV,aAAc,UACd,gBAAiB,SACjC,CAAa,GAEDH,EAAY,MAAM,QAAU,OAGnC,MAAe,CACZG,EAAS,MAAM,CACX,QAAS,6DACT,SAAU,WACV,aAAc,UACd,gBAAiB,SAC7B,CAAS,CACT,QAAc,CACNF,EAAe,MAAM,QAAU,MAClC,CACL"}